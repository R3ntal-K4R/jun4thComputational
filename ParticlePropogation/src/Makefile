
# This file will compile the particle trajectory code

# Define directories to look for files
IDIR=include
SDIR=src
ODIR=$(SDIR)/obj

# Choose compiler, compiler flags, and libraries
CC=gcc
CFLAGS= -g -I$(IDIR) #
# CFLAGS= -std=c99 -g -I$(IDIR) #c99 flag sometimes used on missfit computers
LIBS=-lm

# Setup dependency list and macro
_DEPS = auxiliary.h init.h magnetic.h energy_loss.h motion.h
DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

# Set up object list and macro
_OBJ = auxiliary.o init.o magnetic.o energy_loss.o motion.o particleTrajectory.o
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

# Compile object files
$(ODIR)/%.o: $(SDIR)/%.c $(DEPS)
	$(CC) -c -o $@ $< $(CFLAGS)

# Compile main code and link objects
particlePropagation: $(OBJ)
	$(CC) -o $@ $^ $(CFLAGS) $(LIBS)

# Allow for a file named 'clean'
.PHONY: clean

# Remove files generated by this file
clean:
	rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~
